---
kong_apis:
- name: acceptContentFlag
  uris: "{{ .Values.content_prefix }}/v1/flag/accept"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/flag/accept"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: acceptTermsAndCondition
  uris: "{{ .Values.user_service_prefix }}/v1/tnc/accept"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/tnc/accept"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - appAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: addBadgeToUser
  uris: "{{ .Values.user_service_prefix }}/v1/badges/add"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/badges/add"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - badgeCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: addSystemSettings
  uris: "{{ .Values.data_service_prefix }}/v1/system/settings/set"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/system/settings/set"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - appCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: assemblePage
  uris: "{{ .Values.data_service_prefix }}/v1/page/assemble"
  upstream_url: "{{ .Values.lms_service_url }}/v1/page/assemble"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: assignRole
  uris: "{{ .Values.user_service_prefix }}/v1/role/assign"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/assign/role"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: assignRoleV2
  uris: "{{ .Values.user_service_prefix }}/v2/role/assign"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/user/assign/role"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: batchBulkEnrolment
  uris: "{{ .Values.course_service_prefix }}/v1/batch/bulk/enrollment"
  upstream_url: "{{ .Values.lms_service_url }}/v1/batch/bulk/enrollment"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: batchBulkUnEnrolment
  uris: "{{ .Values.course_service_prefix }}/v1/batch/bulk/unenrollment"
  upstream_url: "{{ .Values.lms_service_url }}/v1/batch/bulk/unenrollment"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: blockUser
  uris: "{{ .Values.user_service_prefix }}/v1/block"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/block"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: checkUploadJobStatus
  uris: "{{ .Values.data_service_prefix }}/v1/upload/status"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/upload/status"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - orgSuperAdmin
    - userSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: compositeSearch
  uris: "{{ .Values.composite_service_prefix }}/v1/search"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
    - contentTempAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: compositePrivateSearch
  uris: "{{ .Values.composite_service_prefix }}/v1/private/search"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v3/private/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: contentBadgeLink
  uris: "{{ .Values.badge_service_prefix }}/v1/content/link"
  upstream_url: "{{ .Values.lms_service_url }}/v1/content/link"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - badgeUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: contentBadgeUnLink
  uris: "{{ .Values.badge_service_prefix }}/v1/content/unlink"
  upstream_url: "{{ .Values.lms_service_url }}/v1/content/unlink"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - badgeAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: copyContent
  uris: "{{ .Values.content_prefix }}/v1/copy"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/copy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: copyFramework
  uris: "{{ .Values.framework_service_prefix }}/v1/copy"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/copy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: courseBatchAddCertificateTemplate
  uris: "{{ .Values.course_service_prefix }}/batch/cert/v1/template/add"
  upstream_url: "{{ .Values.lms_service_url }}/v1/course/batch/cert/template/add"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: courseBatchRemoveCertificateTemplate
  uris: "{{ .Values.course_service_prefix }}/batch/cert/v1/template/remove"
  upstream_url: "{{ .Values.lms_service_url }}/v1/course/batch/cert/template/remove"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: courseEnrollment
  uris: "{{ .Values.course_service_prefix }}/v1/enrol"
  upstream_url: "{{ .Values.lms_service_url }}/v1/course/enroll"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: courseIssueCertificate
  uris: "{{ .Values.course_service_prefix }}/batch/cert/v1/issue"
  upstream_url: "{{ .Values.lms_service_url }}/v1/course/batch/cert/issue"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: courseUnEnrollment
  uris: "{{ .Values.course_service_prefix }}/v1/unenrol"
  upstream_url: "{{ .Values.lms_service_url }}/v1/course/unenroll"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createBatch
  uris: "{{ .Values.course_service_prefix }}/v1/batch/create"
  upstream_url: "{{ .Values.lms_service_url }}/v1/course/batch/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createCertTemplate
  uris: "{{ .Values.cert_service_prefix }}/v1/template/create"
  upstream_url: "{{ .Values.cert_service_url }}/cert/v1/template/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: createChannel
  uris: "{{ .Values.channel_service_prefix }}/v1/create"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/channel/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - channelCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createContent
  uris: "{{ .Values.content_prefix }}/v1/create"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createCourse
  uris: "{{ .Values.course_service_prefix }}/v1/create"
  upstream_url: "{{ .Values.lms_service_url }}/v1/course/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createForm
  uris: "{{ .Values.data_service_prefix }}/v1/form/create"
  upstream_url: "{{ .Values.player_service_url }}/plugin/v1/form/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - formCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: createFramework
  uris: "{{ .Values.framework_service_prefix }}/v1/create"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.x_medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createFrameworkCategory
  uris: "{{ .Values.framework_service_prefix }}/v1/category/create"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/category/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createFrameworkTerm
  uris: "{{ .Values.framework_service_prefix }}/v1/term/create"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/term/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createLock
  uris: "{{ .Values.lock_service_prefix }}/v1/create"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/lock/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createNote
  uris: "{{ .Values.notes_service_prefix }}/v1/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/note/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - noteCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createOrg
  uris: "{{ .Values.org_service_prefix }}/v1/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/org/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - orgCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createPage
  uris: "{{ .Values.data_service_prefix }}/v1/page/create"
  upstream_url: "{{ .Values.lms_service_url }}/v1/page/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - pageCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createPageSection
  uris: "{{ .Values.data_service_prefix }}/v1/page/section/create"
  upstream_url: "{{ .Values.lms_service_url }}/v1/page/section/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - pageCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createPublisher
  uris: "{{ .Values.dialcode_service_prefix }}/v1/publisher/create"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/publisher/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createSession
  uris: "{{ .Values.sso_service_prefix }}/v1/create/session"
  upstream_url: "{{ .Values.player_service_url }}/v1/sso/create/session"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - ssoAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createUser
  uris: "{{ .Values.user_service_prefix }}/v1/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createUserLearnerV3
  uris: "{{ .Values.user_service_prefix }}/v1/signup"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/signup"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createUserVersion2
  uris: "{{ .Values.user_service_prefix }}/v2/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/user/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createUserVersion3
  uris: "{{ .Values.user_service_prefix }}/v3/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v3/user/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createUserVersion4
  uris: "{{ .Values.user_service_prefix }}/v4/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v4/user/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: deleteNote
  uris: "{{ .Values.notes_service_prefix }}/v1/delete"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/note/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - noteAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: deviceProfile
  uris: "{{ .Values.device_prefix }}/profile"
  upstream_url: "{{ .Values.analytics_api_service_url }}/v1/device/profile"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - deviceCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: deviceRegister
  uris: "{{ .Values.device_prefix }}/register"
  upstream_url: "{{ .Values.analytics_api_service_url }}/v1/device/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - deviceCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: dialAssemble
  uris: "{{ .Values.data_service_prefix }}/v1/dial/assemble"
  upstream_url: "{{ .Values.lms_service_url }}/v1/dial/assemble"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: downloadCertificate
  uris: "{{ .Values.user_service_prefix }}/v1/certs/download"
  upstream_url: "{{ .Values.cert_registry_service_url }}/certs/v1/registry/download"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: downloadRegCertificate
  uris: "{{ .Values.cert_registry_service_prefix }}/v1/certs/download"
  upstream_url: "{{ .Values.cert_registry_service_url }}/certs/v1/registry/download"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: downloadTOC
  uris: "{{ .Values.textbook_service_prefix }}/v1/toc/download"
  upstream_url: "{{ .Values.lms_service_url }}/v1/textbook/toc/download"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousContentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: echo
  uris: "{{ .Values.echo_service_prefix }}"
  upstream_url: "{{ .Values.echo_service_url }}"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - ssoCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: experimentcreate
  uris: "{{ .Values.data_service_prefix }}/v1/experiement/create"
  upstream_url: "{{ .Values.analytics_api_service_url }}/experiment/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - experimentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: experimentread
  uris: "{{ .Values.data_service_prefix }}/v1/experiement/get"
  upstream_url: "{{ .Values.analytics_api_service_url }}/experiment/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - expirementAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: fetchURLMetaInformation
  uris: "{{ .Values.content_prefix }}/v1/fetchmeta"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/url/fetchmeta"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - appAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: flagContent
  uris: "{{ .Values.content_prefix }}/v1/flag"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/flag"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: freshDesk
  uris: "{{ .Values.tickets_prefix }}/v1/create"
  upstream_url: "{{ .Values.freshDesk_url }}/api/v2/tickets"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - appAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: generateDialcodes
  uris: "{{ .Values.dialcode_service_prefix }}/v1/generate"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/generate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: generateOtp
  uris: "{{ .Values.otp_service_prefix }}/v1/generate"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/otp/generate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousUserAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: generateOtpV2
  uris: "{{ .Values.otp_service_prefix }}/v2/generate"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/otp/generate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousUserAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getBatch
  uris: "{{ .Values.course_service_prefix }}/v1/batch/read"
  upstream_url: "{{ .Values.lms_service_url }}/v1/course/batch/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: collectionSummaryAgg
  uris: "/v1/collection/summary"
  upstream_url: "{{ .Values.lms_service_url }}/v1/collection/summary"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getContentUploadUrl
  uris: "{{ .Values.content_prefix }}/v1/upload/url/read"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/upload/url"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getCourseHierarchy
  uris: "{{ .Values.course_service_prefix }}/v1/hierarchy"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/course/hierarchy"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getPageSettings
  uris: "{{ .Values.data_service_prefix }}/v1/page/read"
  upstream_url: "{{ .Values.lms_service_url }}/v1/page/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - pageAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getParticipants
  uris: "{{ .Values.course_service_prefix }}/v1/batch/participants/list"
  upstream_url: "{{ .Values.lms_service_url }}/v1/batch/participants/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getSystemSettings
  uris: "{{ .Values.data_service_prefix }}/v1/system/settings/get"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/system/settings/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousAppAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getTenantInfo
  uris: "{{ .Values.org_service_prefix }}/v1/tenant/info"
  upstream_url: "{{ .Values.player_service_url }}/v1/tenant/info"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousOrgAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getUserByKey
  uris: "{{ .Values.user_service_prefix }}/v1/get"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousUserAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getUserByKeyV2
  uris: "{{ .Values.user_service_prefix }}/v2/get"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/user/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousUserAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getUserProfile
  uris: "{{ .Values.user_service_prefix }}/v1/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getUserProfileV2
  uris: "{{ .Values.user_service_prefix }}/v2/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/user/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: indexSync
  uris: "{{ .Values.data_service_prefix }}/v1/index/sync"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/data/sync"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
    - orgAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: ItemSetAPIs
  uris: "{{ .Values.itemset_prefix }}/v1"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/itemset/v1"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - itemSetAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: KongConsumerApi
  uris: "{{ .Values.api_manager_perfix }}/v1/consumer"
  upstream_url: "{{ .Values.am_util_url }}/v1/consumer"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - kongConsumerAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: LicenseAPI
  uris: "{{ .Values.license_api_prefix }}/v3"
  upstream_url: "{{ .Values.content_service_url }}/license/v3"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - appAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: linkDialcodeContent
  uris: "{{ .Values.dialcode_service_prefix }}/v1/content/link"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/content/link"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listAllBadges
  uris: "{{ .Values.org_service_prefix }}/v1/badges/list"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/badges/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - badgeAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: listChannel
  uris: "{{ .Values.channel_service_prefix }}/v1/list"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/channel/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - channelAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchCourseBatches
  uris: "{{ .Values.course_service_prefix }}/v1/batch/list"
  upstream_url: "{{ .Values.lms_service_url }}/v1/course/batch/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousCourseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listCourseEnrollments
  uris: "{{ .Values.course_service_prefix }}/v1/user/enrollment/list"
  upstream_url: "{{ .Values.lms_service_url }}/v1/user/courses/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousCourseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: privateListCourseEnrollments
  uris: "{{ .Values.course_service_prefix }}/private/v1/user/enrollment/list"
  upstream_url: "{{ .Values.lms_service_url }}/private/v1/user/courses/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listUserCourseEnrollments
  uris: "{{ .Values.course_service_prefix }}/v2/user/enrollment/list"
  upstream_url: "{{ .Values.lms_service_url }}/v2/user/courses/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousCourseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: privateListUserCourseEnrollments
  uris: "{{ .Values.course_service_prefix }}/private/v2/user/enrollment/list"
  upstream_url: "{{ .Values.lms_service_url }}/private/v2/user/courses/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - privateCourseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listDialcodes
  uris: "{{ .Values.dialcode_service_prefix }}/v1/list"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listFramework
  uris: "{{ .Values.framework_service_prefix }}/v1/list"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.x_medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listLock
  uris: "{{ .Values.lock_service_prefix }}/v1/list"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/lock/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listOrdinals
  uris: "{{ .Values.meta_service_prefix }}/v1/ordinals/list"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/ordinals/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - appAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listPageSections
  uris: "{{ .Values.data_service_prefix }}/v1/page/section/list"
  upstream_url: "{{ .Values.lms_service_url }}/v1/page/section/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - pageAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listResourceBundles
  uris: "{{ .Values.meta_service_prefix }}/v1/resourcebundles/list"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/resourcebundles/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousAppAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listSystemSettings
  uris: "{{ .Values.data_service_prefix }}/v1/system/settings/list"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/system/settings/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - appAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listTerms
  uris: "{{ .Values.meta_service_prefix }}/v1/terms/list"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/terms/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: masterLocationCreate
  uris: "{{ .Values.data_service_prefix }}/v1/location/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/location/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - locationCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: masterLocationDelete
  uris: "{{ .Values.data_service_prefix }}/v1/location/delete"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/location/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - locationAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: masterLocationSearch
  uris: "{{ .Values.data_service_prefix }}/v1/location/search"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/location/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - locationAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: masterLocationUpdate
  uris: "{{ .Values.data_service_prefix }}/v1/location/update"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/location/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - locationUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: masterLocationUpload
  uris: "{{ .Values.data_service_prefix }}/v1/bulk/location/upload"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/bulk/location/upload"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - locationSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: mergeUserAccounts
  uris: "{{ .Values.user_service_prefix }}/v1/account/merge"
  upstream_url: "{{ .Values.userorg_service_url }}/private/user/v1/account/merge"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: orgAssignKeys
  uris: "{{ .Values.org_service_prefix }}/v1/assign/key"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/org/assign/key"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - orgAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: orgBulkUpload
  uris: "{{ .Values.org_service_prefix }}/v1/upload"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/org/upload"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - orgSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: pluginSearch
  uris: "{{ .Values.plugin_service_prefix }}/v1/search"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/plugins/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - pluginAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: PrivateContentCreateAPIs
  uris: "{{ .Values.private_content_prefix }}/v3/create"
  upstream_url: "{{ .Values.content_service_url }}/content/v3/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: PrivateContentReadAPIs
  uris: "{{ .Values.private_content_prefix }}/v3/read"
  upstream_url: "{{ .Values.content_service_url }}/content/v3/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: PrivateContentUpdateAPIs
  uris: "{{ .Values.private_content_prefix }}/v3/update"
  upstream_url: "{{ .Values.content_service_url }}/content/v3/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: PrivateContentRetireAPI
  uris: "{{ .Values.private_content_prefix }}/v3/retire"
  upstream_url: "{{ .Values.learning_service_url }}/content/v3/retire"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: PrivateContentUploadAPI
  uris: "{{ .Values.private_content_prefix }}/v3/upload"
  upstream_url: "{{ .Values.content_service_url }}/content/v3/upload"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: PrivateContentReviewAPI
  uris: "{{ .Values.private_content_prefix }}/v3/review"
  upstream_url: "{{ .Values.learning_service_url }}/content/v3/review"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: PrivateContentPublishAPI
  uris: "{{ .Values.private_content_prefix }}/v3/publish"
  upstream_url: "{{ .Values.learning_service_url }}/content/v3/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: PrivateContentRejectAPI
  uris: "{{ .Values.private_content_prefix }}/v3/reject"
  upstream_url: "{{ .Values.learning_service_url }}/content/v3/reject"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: PrivateContentHierarchyAPI
  uris: "{{ .Values.private_content_prefix }}/v3/hierarchy"
  upstream_url: "{{ .Values.content_service_url }}/content/v3/hierarchy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: privateUserAssignRole
  uris: "{{ .Values.user_service_prefix }}/private/v1/assign/role"
  upstream_url: "{{ .Values.userorg_service_url }}/private/user/v1/assign/role"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: privateUserRead
  uris: "{{ .Values.user_service_prefix }}/private/v1/read"
  upstream_url: "{{ .Values.userorg_service_url }}/private/user/v1/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userSuperAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: publishContent
  uris: "{{ .Values.content_prefix }}/v1/publish"
  upstream_url: "{{ .Values.content_service_url }}/content/v3/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: publishCourse
  uris: "{{ .Values.course_service_prefix }}/v1/publish"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/course/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: publishDialcode
  uris: "{{ .Values.dialcode_service_prefix }}/v1/publish"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: publishFramework
  uris: "{{ .Values.framework_service_prefix }}/v1/publish"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: qrCodeBatchProcessRetry
  uris: "{{ .Values.dialcode_service_prefix }}/v1/process/retry"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/process/retry"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: qrCodeBatchProcessStatus
  uris: "{{ .Values.dialcode_service_prefix }}/v1/process/status"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/process/status"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: qrCodeDownload
  uris: "{{ .Values.course_service_prefix }}/v1/qrcode/download"
  upstream_url: "{{ .Values.lms_service_url }}/v1/course/qrcode/download"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readCertTemplate
  uris: "{{ .Values.cert_service_prefix }}/v1/template/read"
  upstream_url: "{{ .Values.cert_service_url }}/cert/v1/template/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: readChannel
  uris: "{{ .Values.channel_service_prefix }}/v1/read"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/channel/read"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.x_large_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readContent
  uris: "{{ .Values.content_prefix }}/v1/read"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/read"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: contentPrivateRead
  uris: "{{ .Values.content_prefix }}/v1/private/read"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/private/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readContentState
  uris: "{{ .Values.course_service_prefix }}/v1/content/state/read"
  upstream_url: "{{ .Values.lms_service_url }}/v1/content/state/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: privateReadContentState
  uris: "{{ .Values.course_service_prefix }}/private/v1/content/state/read"
  upstream_url: "{{ .Values.lms_service_url }}/private/v1/content/state/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - privateCourseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readCourse
  uris: "{{ .Values.course_service_prefix }}/v1/read"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/course/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readCourseEnrollment
  uris: "{{ .Values.course_service_prefix }}/v1/user/enrollment/read"
  upstream_url: "{{ .Values.lms_service_url }}/v1/user/courses/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readDialcode
  uris: "{{ .Values.dialcode_service_prefix }}/v1/read"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readDialcodeV2
  uris: "{{ .Values.dialcode_service_prefix }}/v2/read"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v2/dialcode/read"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readForm
  uris: "{{ .Values.data_service_prefix }}/v1/form/read"
  upstream_url: "{{ .Values.player_service_url }}/plugin/v1/form/read"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: readFramework
  uris: "{{ .Values.framework_service_prefix }}/v1/read"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/read"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.premium_consumer_large_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readFrameworkCategory
  uris: "{{ .Values.framework_service_prefix }}/v1/category/read"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/category/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readFrameworkTerm
  uris: "{{ .Values.framework_service_prefix }}/v1/term/read"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/term/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.x_large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readNote
  uris: "{{ .Values.notes_service_prefix }}/v1/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/note/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - noteAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readOrg
  uris: "{{ .Values.org_service_prefix }}/v1/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/org/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousOrgAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readPageSection
  uris: "{{ .Values.data_service_prefix }}/v1/page/section/read"
  upstream_url: "{{ .Values.lms_service_url }}/v1/page/section/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - pageAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readPublisher
  uris: "{{ .Values.dialcode_service_prefix }}/v1/publisher/read"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/publisher/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readRoleMapping
  uris: "{{ .Values.data_service_prefix }}/v1/role/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/role/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readUserSpecificRole
  uris: "{{ .Values.user_service_prefix }}/v1/role/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/role/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readUserProfile
  uris: "{{ .Values.user_service_prefix }}/v1/profile/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/getuser"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerDesktopApp
  uris: "{{ .Values.api_manager_perfix }}/v1/consumer/desktop_app/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v1/consumer/desktop_app/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - desktopSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerDesktopDevice
  uris: "{{ .Values.api_manager_perfix }}/v1/consumer/desktop_device/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v1/consumer/desktop_device/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - desktopAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerDesktopDevicev2
  uris: "{{ .Values.api_manager_perfix }}/v2/consumer/desktop_device/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v2/consumer/desktop_device/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - desktopAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: refreshLock
  uris: "{{ .Values.lock_service_prefix }}/v1/refresh"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/lock/refresh"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: refreshToken
  uris: "{{ .Values.auth_service_prefix }}/v1/refresh/token"
  upstream_url: "{{ .Values.am_util_url }}/v1/auth/refresh/token"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - refreshTokenCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerMobileApp
  uris: "{{ .Values.api_manager_perfix }}/v1/consumer/mobile_app/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v1/consumer/mobile_app/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - mobileSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerMobileAppOpenRAP
  uris: "{{ .Values.api_manager_perfix }}/v1/consumer/mobile_app_openrap/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v1/consumer/mobile_app_openrap/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - mobileOpenRAPSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerMobileAppTeacherAid
  uris: "{{ .Values.api_manager_perfix }}/v1/consumer/mobile_app_teacheraid/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v1/consumer/mobile_app_teacheraid/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - mobileTeacherAidSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerMobileDevice
  uris: "{{ .Values.api_manager_perfix }}/v1/consumer/mobile_device/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v1/consumer/mobile_device/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - mobileAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerMobileDevicev2
  uris: "{{ .Values.api_manager_perfix }}/v2/consumer/mobile_device/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v2/consumer/mobile_device/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - mobileAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerPortalAnonymous
  uris: "{{ .Values.api_manager_perfix }}/v2/consumer/portal_anonymous/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v2/consumer/portal_anonymous/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - portalAnonymous
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerPortalLoggedin
  uris: "{{ .Values.api_manager_perfix }}/v2/consumer/portal_loggedin/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v2/consumer/portal_loggedin/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - portalLoggedin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerMobileDeviceOpenRAP
  uris: "{{ .Values.api_manager_perfix }}/v1/consumer/mobile_device_openrap/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v1/consumer/mobile_device_openrap/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - mobileOpenRAPAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerMobileDeviceTeacherAid
  uris: "{{ .Values.api_manager_perfix }}/v1/consumer/mobile_device_teacheraid/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v1/consumer/mobile_device_teacheraid/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - mobileTeacherAidAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: rejectContent
  uris: "{{ .Values.content_prefix }}/v1/reject"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/reject"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: rejectContentFlag
  uris: "{{ .Values.content_prefix }}/v1/flag/reject"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/flag/reject"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: releaseDialcode
  uris: "{{ .Values.dialcode_service_prefix }}/v1/release"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/release"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: reserveDialcode
  uris: "{{ .Values.dialcode_service_prefix }}/v1/reserve"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/reserve"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: retireContent
  uris: "{{ .Values.content_prefix }}/v1/retire"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/retire"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: retireCourse
  uris: "{{ .Values.course_service_prefix }}/v1/retire"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/course/retire"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: retireLock
  uris: "{{ .Values.lock_service_prefix }}/v1/retire"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/lock/retire"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchChannel
  uris: "{{ .Values.channel_service_prefix }}/v1/search"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/channel/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - channelAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchContent
  uris: "{{ .Values.content_prefix }}/v1/search"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/search"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchCourse
  uris: "{{ .Values.course_service_prefix }}/v1/search"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/course/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchDialcodes
  uris: "{{ .Values.dialcode_service_prefix }}/v1/search"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchFrameworkCategory
  uris: "{{ .Values.framework_service_prefix }}/v1/category/search"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/category/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchFrameworkTerm
  uris: "{{ .Values.framework_service_prefix }}/v1/term/search"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/term/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchNotes
  uris: "{{ .Values.notes_service_prefix }}/v1/search"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/note/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - noteAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchOrgExtended
  uris: "{{ .Values.org_service_prefix }}/v1/ext/search"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/org/search"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchOrg
  uris: "{{ .Values.org_service_prefix }}/v1/search"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/org/search"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchUser
  uris: "{{ .Values.user_service_prefix }}/v1/search"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userTempAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: sendEmailNotification
  uris: "{{ .Values.user_service_prefix }}/v1/notification/email"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/notification/email"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - appUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: submitContentForReview
  uris: "{{ .Values.content_prefix }}/v1/review"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/review"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: submitCourseForReview
  uris: "{{ .Values.course_service_prefix }}/v1/review"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/course/review"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: telemetry
  uris: "{{ .Values.data_service_prefix }}/v1/telemetry"
  upstream_url: "{{ .Values.telemetry_service_url }}/v1/telemetry"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - telemetryCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.premium_consumer_large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: telemetryErrorLogging
  uris: "{{ .Values.data_service_prefix }}/v1/client/logs"
  upstream_url: "{{ .Values.analytics_api_service_url }}/data/v1/client/logs"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - telemetryCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: unblockUser
  uris: "{{ .Values.user_service_prefix }}/v1/unblock"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/unblock"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateBatch
  uris: "{{ .Values.course_service_prefix }}/v1/batch/update"
  upstream_url: "{{ .Values.lms_service_url }}/v1/course/batch/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateCertTemplate
  uris: "{{ .Values.cert_service_prefix }}/v1/template/update"
  upstream_url: "{{ .Values.cert_service_url }}/cert/v1/template/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: updateChannel
  uris: "{{ .Values.channel_service_prefix }}/v1/update"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/channel/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - channelUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateCollaborators
  uris: "{{ .Values.content_prefix }}/v1/collaborator/update"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/collaborator/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateContent
  uris: "{{ .Values.content_prefix }}/v1/update"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateContentState
  uris: "{{ .Values.course_service_prefix }}/v1/content/state/update"
  upstream_url: "{{ .Values.lms_service_url }}/v1/content/state/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateCourse
  uris: "{{ .Values.course_service_prefix }}/v1/update"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/course/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: linkDialcodeContentV1
  uris: "{{ .Values.content_prefix }}/v1/dialcode/link"
  upstream_url: "{{ .Values.content_service_url }}/content/v3/dialcode/link"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: reserveDialcodeContent
  uris: "{{ .Values.content_prefix }}/v1/dialcode/reserve"
  upstream_url: "{{ .Values.content_service_url }}/content/v3/dialcode/reserve"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateCourseHierarchy
  uris: "{{ .Values.course_service_prefix }}/v1/hierarchy/update"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/course/hierarchy/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateDesktopApp
  uris: "{{ .Values.desktop_app_prefix }}/v1/update"
  upstream_url: "{{ .Values.player_service_url }}/v1/desktop/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousAppAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateDialcode
  uris: "{{ .Values.dialcode_service_prefix }}/v1/update"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateDialcodeV2
  uris: "{{ .Values.dialcode_service_prefix }}/v2/update"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v2/dialcode/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateForm
  uris: "{{ .Values.data_service_prefix }}/v1/form/update"
  upstream_url: "{{ .Values.player_service_url }}/plugin/v1/form/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - formUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: updateFramework
  uris: "{{ .Values.framework_service_prefix }}/v1/update"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateFrameworkCategory
  uris: "{{ .Values.framework_service_prefix }}/v1/category/update"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/category/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateFrameworkTerm
  uris: "{{ .Values.framework_service_prefix }}/v1/term/update"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/framework/term/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateNote
  uris: "{{ .Values.notes_service_prefix }}/v1/update"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/note/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - noteUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateOrg
  uris: "{{ .Values.org_service_prefix }}/v1/update"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/org/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - orgUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateOrgStatus
  uris: "{{ .Values.org_service_prefix }}/v1/status/update"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/org/status/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - orgUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updatePage
  uris: "{{ .Values.data_service_prefix }}/v1/page/update"
  upstream_url: "{{ .Values.lms_service_url }}/v1/page/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - pageUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updatePageSection
  uris: "{{ .Values.data_service_prefix }}/v1/page/section/update"
  upstream_url: "{{ .Values.lms_service_url }}/v1/page/section/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - pageUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updatePublisher
  uris: "{{ .Values.dialcode_service_prefix }}/v1/publisher/update"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/dialcode/publisher/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dialcodeUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateUser
  uris: "{{ .Values.user_service_prefix }}/v1/update"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: uploadContent
  uris: "{{ .Values.content_prefix }}/v1/upload"
  upstream_url: "{{ .Values.knowledge_mw_service_url }}/v1/content/upload"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.large_request_size_limit }}"

- name: uploadCrashLogs
  uris: "{{ .Values.desktop_app_prefix }}/v1/upload-crash-logs"
  upstream_url: "{{ .Values.player_service_url }}/v1/desktop/upload-crash-logs"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - telemetryCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: uploadTOC
  uris: "{{ .Values.textbook_service_prefix }}/v1/toc/upload"
  upstream_url: "{{ .Values.lms_service_url }}/v1/textbook/toc/upload"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: userBulkUpload
  uris: "{{ .Values.user_service_prefix }}/v1/upload"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/upload"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: userExistenceApi
  uris: "{{ .Values.user_service_prefix }}/v1/exists"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/exists"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousUserAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: userExistenceApiV2
  uris: "{{ .Values.user_service_prefix }}/v2/exists"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/user/exists"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: userFeed
  uris: "{{ .Values.user_service_prefix }}/v1/feed"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/feed"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: userFeedCreate
  uris: "{{ .Values.user_service_prefix }}/feed/v1/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/feed/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: userFeedDelete
  uris: "{{ .Values.user_service_prefix }}/feed/v1/delete"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/feed/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: userFeedUpdate
  uris: "{{ .Values.user_service_prefix }}/feed/v1/update"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/feed/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: userMigrate
  uris: "{{ .Values.user_service_prefix }}/v1/migrate"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/migrate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: validateRegCertificate
  uris: "{{ .Values.cert_registry_service_prefix }}/v1/certs/validate"
  upstream_url: "{{ .Values.cert_registry_service_url }}/certs/v1/registry/validate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousCertificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: verifyOtp
  uris: "{{ .Values.otp_service_prefix }}/v1/verify"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/otp/verify"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousUserAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: verifyOtpV2
  uris: "{{ .Values.otp_service_prefix }}/v2/verify"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/otp/verify"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousUserAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: verifyRegCertificate
  uris: "{{ .Values.cert_registry_service_prefix }}/v1/certs/verify"
  upstream_url: "{{ .Values.cert_registry_service_url }}/certs/v1/registry/verify"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerIgotApp
  uris: "{{ .Values.api_manager_perfix }}/v1/consumer/igot_app/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v1/consumer/igot_app/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - igotAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: registerIgotDevice
  uris: "{{ .Values.api_manager_perfix }}/v1/consumer/igot_device/credential/register"
  upstream_url: "{{ .Values.am_util_url }}/v1/consumer/igot_device/credential/register"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - igotApp
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.large_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listReports
  uris: "{{ .Values.report_service_prefix }}/report/list"
  upstream_url: "{{ .Values.report_service_url }}/report/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - reportsAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getReport
  uris: "{{ .Values.report_service_prefix }}/report/get"
  upstream_url: "{{ .Values.report_service_url }}/report/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - reportsAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateReport
  uris: "{{ .Values.report_service_prefix }}/report/update"
  upstream_url: "{{ .Values.report_service_url }}/report/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - reportsUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: deleteReport
  uris: "{{ .Values.report_service_prefix }}/report/delete"
  upstream_url: "{{ .Values.report_service_url }}/report/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - reportsAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createReport
  uris: "{{ .Values.report_service_prefix }}/report/create"
  upstream_url: "{{ .Values.report_service_url }}/report/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - reportsCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createReportSummary
  uris: "{{ .Values.report_service_prefix }}/report/summary/create"
  upstream_url: "{{ .Values.report_service_url }}/report/summary/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - reportsCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getReportSummary
  uris: "{{ .Values.report_service_prefix }}/report/summary"
  upstream_url: "{{ .Values.report_service_url }}/report/summary"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - reportsAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listReportSummary
  uris: "{{ .Values.report_service_prefix }}/report/summary/list"
  upstream_url: "{{ .Values.report_service_url }}/report/summary/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - reportsAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchRegCertificate
  uris: "{{ .Values.cert_registry_service_prefix }}/v1/certs/search"
  upstream_url: "{{ .Values.cert_registry_service_url }}/certs/v1/registry/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchRegCertificateV2
  uris: "{{ .Values.cert_registry_service_prefix }}/v2/certs/search"
  upstream_url: "{{ .Values.cert_registry_service_url }}/certs/v2/registry/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readRegCertificate
  uris: "{{ .Values.cert_registry_service_prefix }}/v1/certs/read"
  upstream_url: "{{ .Values.cert_registry_service_url }}/certs/v1/registry/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: forgotPassword
  uris: "{{ .Values.learner_private_route_prefix }}/user/v1/password/reset"
  upstream_url: "{{ .Values.userorg_service_url }}/private/user/v1/password/reset"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousUserAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: publishReport
  uris: "{{ .Values.report_service_prefix }}/report/publish"
  upstream_url: "{{ .Values.report_service_url }}/report/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - reportsAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: retireReport
  uris: "{{ .Values.report_service_prefix }}/report/retire"
  upstream_url: "{{ .Values.report_service_url }}/report/retire"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - reportsAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchManagedUser
  uris: "{{ .Values.user_service_prefix }}/v1/managed"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/managed"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousUserAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createGroup
  uris: "{{ .Values.group_service_prefix }}/v1/create"
  upstream_url: "{{ .Values.group_service_url }}/v1/group/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - groupCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateGroup
  uris: "{{ .Values.group_service_prefix }}/v1/update"
  upstream_url: "{{ .Values.group_service_url }}/v1/group/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - groupUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listGroup
  uris: "{{ .Values.group_service_prefix }}/v1/list"
  upstream_url: "{{ .Values.group_service_url }}/v1/group/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - groupAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readGroup
  uris: "{{ .Values.group_service_prefix }}/v1/read"
  upstream_url: "{{ .Values.group_service_url }}/v1/group/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - groupAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: deleteGroup
  uris: "{{ .Values.group_service_prefix }}/v1/delete"
  upstream_url: "{{ .Values.group_service_url }}/v1/group/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - groupAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateGroupMembership
  uris: "{{ .Values.group_service_prefix }}/membership/v1/update"
  upstream_url: "{{ .Values.group_service_url }}/v1/group/membership/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - groupUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: groupActivityAgg
  uris: "{{ .Values.data_service_prefix }}/v1/group/activity/agg"
  upstream_url: "{{ .Values.lms_service_url }}/v1/group/activity/agg"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - groupAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listForm
  uris: "{{ .Values.data_service_prefix }}/v1/form/list"
  upstream_url: "{{ .Values.player_service_url }}/plugin/v1/form/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - appAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getUserProfileV3
  uris: "{{ .Values.user_service_prefix }}/v3/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v3/user/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateUserDeclarations
  uris: "{{ .Values.user_service_prefix }}/v1/declarations"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/declarations"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: updateUserConsent
  uris: "{{ .Values.user_service_prefix }}/v1/consent/update"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/consent/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: readUserConsent
  uris: "{{ .Values.user_service_prefix }}/v1/consent/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/consent/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: readUserConsentV2
  uris: "{{ .Values.user_service_prefix }}/v2/consent/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/user/consent/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: channelSpecificTelemetryExhaust
  uris: "{{ .Values.data_service_prefix }}/v3/dataset/get"
  upstream_url: "{{ .Values.analytics_api_service_url }}/dataset/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dataAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: publicDataExhaust
  uris: "{{ .Values.dataset_service_prefix }}/get"
  upstream_url: "{{ .Values.analytics_api_service_url }}/public/dataset/get"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: submitDataExhaustRequest
  uris: "{{ .Values.dataset_service_prefix }}/v1/request/submit"
  upstream_url: "{{ .Values.analytics_api_service_url }}/request/submit"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dataCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getDataExhaustRequest
  uris: "{{ .Values.dataset_service_prefix }}/v1/request/read"
  upstream_url: "{{ .Values.analytics_api_service_url }}/request/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dataAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listDataExhaustRequest
  uris: "{{ .Values.dataset_service_prefix }}/v1/request/list"
  upstream_url: "{{ .Values.analytics_api_service_url }}/request/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dataAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: addDataset
  uris: "{{ .Values.dataset_service_prefix }}/v1/add"
  upstream_url: "{{ .Values.analytics_api_service_url }}/dataset/add"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dataCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listDataset
  uris: "{{ .Values.dataset_service_prefix }}/v1/list"
  upstream_url: "{{ .Values.analytics_api_service_url }}/dataset/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - dataAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createTenantPreferences
  uris: "{{ .Values.org_service_prefix }}/v2/preferences/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/org/preferences/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - orgUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateTenantPreferences
  uris: "{{ .Values.org_service_prefix }}/v2/preferences/update"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/org/preferences/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - orgUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readTenantPreferencess
  uris: "{{ .Values.org_service_prefix }}/v2/preferences/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/org/preferences/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - orgAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: generateCertificateV2
  uris: "{{ .Values.cert_service_prefix }}/v2/certs/generate"
  upstream_url: "{{ .Values.cert_service_url }}/v2/certs/generate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: addRegCertificateV2
  uris: "{{ .Values.cert_registry_service_prefix }}/v2/certs/add"
  upstream_url: "{{ .Values.cert_registry_service_url }}/certs/v2/registry/add"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: downloadRegCertificateV2
  uris: "{{ .Values.cert_registry_service_prefix }}/v2/certs/download"
  upstream_url: "{{ .Values.cert_registry_service_url }}/certs/v2/registry/download"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: contentImportAPI
  uris: "{{ .Values.content_prefix }}/v1/import"
  upstream_url: "{{ .Values.content_service_url }}/content/v3/import"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: druidGetUpdateListReport
  uris: "{{ .Values.data_service_prefix }}/v1{{ .Values.analytics_report_service_prefix }}"
  upstream_url: "{{ .Values.analytics_api_service_url }}{{ .Values.analytics_report_service_prefix }}"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - druidReportAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: druidDeactivateReport
  uris: "{{ .Values.data_service_prefix }}/v1{{ .Values.analytics_report_service_prefix }}/deactivate"
  upstream_url: "{{ .Values.analytics_api_service_url }}{{ .Values.analytics_report_service_prefix }}/deactivate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - druidReportAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: druidCreateReport
  uris: "{{ .Values.data_service_prefix }}/v1{{ .Values.analytics_report_service_prefix }}/submit"
  upstream_url: "{{ .Values.analytics_api_service_url }}{{ .Values.analytics_report_service_prefix }}/submit"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - druidReportCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: addRegCertificate
  uris: "{{ .Values.cert_registry_service_prefix }}/v1/certs/add"
  upstream_url: "{{ .Values.cert_registry_service_url }}/certs/v1/registry/add"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: generateCertificate
  uris: "{{ .Values.cert_service_prefix }}/v1/certs/generate"
  upstream_url: "{{ .Values.cert_service_url }}/v1/certs/generate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: createObjectCategory
  uris: "{{ .Values.object_category_prefix }}/v1/create"
  upstream_url: "{{ .Values.taxonomy_service_url }}/object/category/v4/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readObjectCategory
  uris: "{{ .Values.object_category_prefix }}/v1/read"
  upstream_url: "{{ .Values.taxonomy_service_url }}/object/category/v4/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.x_medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateObjectCategory
  uris: "{{ .Values.object_category_prefix }}/v1/update"
  upstream_url: "{{ .Values.taxonomy_service_url }}/object/category/v4/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createObjectCategoryDefinition
  uris: "{{ .Values.object_category_definition_prefix }}/v1/create"
  upstream_url: "{{ .Values.taxonomy_service_url }}/object/category/definition/v4/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readObjectCategoryDefinition
  uris: "{{ .Values.object_category_definition_prefix }}/v1/read"
  upstream_url: "{{ .Values.taxonomy_service_url }}/object/category/definition/v4/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.x_medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateObjectCategoryDefinition
  uris: "{{ .Values.object_category_definition_prefix }}/v1/update"
  upstream_url: "{{ .Values.taxonomy_service_url }}/object/category/definition/v4/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - frameworkUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createAsset
  uris: "{{ .Values.asset_prefix }}/v1/create"
  upstream_url: "{{ .Values.content_service_url }}/asset/v4/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: updateAsset
  uris: "{{ .Values.asset_prefix }}/v1/update"
  upstream_url: "{{ .Values.content_service_url }}/asset/v4/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: readAsset
  uris: "{{ .Values.asset_prefix }}/v1/read"
  upstream_url: "{{ .Values.content_service_url }}/asset/v4/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousContentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: uploadAsset
  uris: "{{ .Values.asset_prefix }}/v1/upload"
  upstream_url: "{{ .Values.content_service_url }}/asset/v4/upload"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: uploadUrlAsset
  uris: "{{ .Values.asset_prefix }}/v1/upload/url"
  upstream_url: "{{ .Values.content_service_url }}/asset/v4/upload/url"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: copyAsset
  uris: "{{ .Values.asset_prefix }}/v1/copy"
  upstream_url: "{{ .Values.content_service_url }}/asset/v4/copy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionCreate
  uris: "{{ .Values.collection_prefix }}/v1/create"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionRead
  uris: "{{ .Values.collection_prefix }}/v1/read"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousContentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionPrivateRead
  uris: "{{ .Values.collection_prefix }}/v1/private/read"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/private/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: assessmentItemRead
  uris: "{{ .Values.assessment_prefix }}/v1/items/read"
  upstream_url: "{{ .Values.learning_service_url }}/assessment/v3/items/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - assessmentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionUpdate
  uris: "{{ .Values.collection_prefix }}/v1/update"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionFlag
  uris: "{{ .Values.collection_prefix }}/v1/flag"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/flag"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionDiscard
  uris: "{{ .Values.collection_prefix }}/v1/discard"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/discard"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionRetire
  uris: "{{ .Values.collection_prefix }}/v1/retire"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/retire"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: linkDialcodeCollection
  uris: "{{ .Values.collection_prefix }}/v1/dialcode/link"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/dialcode/link"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: collectionHierarchyAdd
  uris: "{{ .Values.collection_prefix }}/v1/hierarchy/add"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/hierarchy/add"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionHierarchyRemove
  uris: "{{ .Values.collection_prefix }}/v1/hierarchy/remove"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/hierarchy/remove"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionHierarchyUpdate
  uris: "{{ .Values.collection_prefix }}/v1/hierarchy/update"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/hierarchy/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionHierarchyRead
  uris: "{{ .Values.collection_prefix }}/v1/hierarchy"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/hierarchy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousContentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionCopy
  uris: "{{ .Values.collection_prefix }}/v1/copy"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/copy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionImport
  uris: "{{ .Values.collection_prefix }}/v1/import"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/import"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: collectionExport
  uris: "{{ .Values.collection_prefix }}/v1/export"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/export"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getDiscussionTagsList
  uris: "{{ .Values.discussions_prefix }}/tags"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/tags"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getDiscussionCategories
  uris: "{{ .Values.discussions_prefix }}/categories"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/categories"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getDiscussionNotificationsList
  uris: "{{ .Values.discussions_prefix }}/notifications"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/notifications"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getUserDetailsOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/user"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/user"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getCategoryDetailsOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/category"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/category"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getUnreadTopicsOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/unread"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/unread"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getRecentTopicsOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/recent"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/recent"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getPopularTopicsOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/popular"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/popular"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getTopTopicsOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/top"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/top"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getTopicsOfDiscussionById
  uris: "{{ .Values.discussions_prefix }}/topic"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/topic"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getTotalUnreadTopicsOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/unread/total"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/unread/total"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getTopicsOfDiscussionByTeaserId
  uris: "{{ .Values.discussions_prefix }}/topic/teaser"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/topic/teaser"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getTopicsPaginationByIdOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/topic/pagination"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/topic/pagination"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getGroupsListOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/groups"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/groups"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getRecentPostsByDateOfDiscussions
  uris: "{{ .Values.discussions_prefix }}/recent/posts"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/recent/posts"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: createTopicOfDiscussions
  uris: "{{ .Values.discussions_prefix }}/v2/topics"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/v2/topics"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: createCategoryOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/v2/categories"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/v2/categories"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: createGroupsOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/v2/groups"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/v2/groups"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: createNewPostOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/v2/posts"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/v2/posts"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: createNewUserOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/v2/users"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/v2/users"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getUserDetailsByUsername
  uris: "{{ .Values.discussions_prefix }}/user/username"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/user/username"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getForumIdOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/forumId"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/forumId"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: addForumOfDiscussion
  uris: "{{ .Values.discussions_prefix }}/forum"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/forum"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: copyPrivilegesFromParentCategory
  uris: "{{ .Values.discussions_prefix }}/privileges/v2/copy"
  upstream_url: "{{ .Values.discussions_mw_service_url }}/privileges/v2/copy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - discussionCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionCreate
  uris: "{{ .Values.question_prefix }}/v1/create"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v4/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionRead
  uris: "{{ .Values.question_prefix }}/v1/read"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v4/read"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionPrivateRead
  uris: "{{ .Values.question_prefix }}/v1/private/read"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v4/private/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionUpdate
  uris: "{{ .Values.question_prefix }}/v1/update"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v4/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionRetire
  uris: "{{ .Values.question_prefix }}/v1/retire"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v4/retire"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionReview
  uris: "{{ .Values.question_prefix }}/v1/review"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v4/review"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionPublish
  uris: "{{ .Values.question_prefix }}/v1/publish"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v4/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionList
  uris: "{{ .Values.question_prefix }}/v1/list"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v4/list"
  strip_uri: true
  plugins:
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionReject
  uris: "{{ .Values.question_prefix }}/v1/reject"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v4/reject"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetCreate
  uris: "{{ .Values.questionset_prefix }}/v1/create"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetRead
  uris: "{{ .Values.questionset_prefix }}/v1/read"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/read"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetPrivateRead
  uris: "{{ .Values.questionset_prefix }}/v1/private/read"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/private/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetUpdate
  uris: "{{ .Values.questionset_prefix }}/v1/update"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetAddQuestion
  uris: "{{ .Values.questionset_prefix }}/v1/add"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/add"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - 'contentUpdate'
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetRemoveQuestion
  uris: "{{ .Values.questionset_prefix }}/v1/remove"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/remove"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - 'contentUpdate'
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetRetire
  uris: "{{ .Values.questionset_prefix }}/v1/retire"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/retire"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetReview
  uris: "{{ .Values.questionset_prefix }}/v1/review"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/review"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetPublish
  uris: "{{ .Values.questionset_prefix }}/v1/publish"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetUpdateHierarchy
  uris: "{{ .Values.questionset_prefix }}/v1/hierarchy/update"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/hierarchy/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetReadHierarchy
  uris: "{{ .Values.questionset_prefix }}/v1/hierarchy"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/hierarchy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousContentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetReject
  uris: "{{ .Values.questionset_prefix }}/v1/reject"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/reject"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: updateUserV2
  uris: "{{ .Values.user_service_prefix }}/v2/update"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/user/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionImportAPI
  uris: "{{ .Values.question_prefix }}/v1/import"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v4/import"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: managedUserV1Create
  uris: "{{ .Values.user_service_prefix }}/v1/managed/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/manageduser/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: managedUserV2Create
  uris: "{{ .Values.user_service_prefix }}/v2/managed/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/manageduser/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: ssoUserV1Create
  uris: "{{ .Values.user_service_prefix }}/v1/sso/create"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/ssouser/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousUserCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: ssoUserV2Create
  uris: "{{ .Values.user_service_prefix }}/v2/signup"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/user/signup"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousUserCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getUserProfileV4
  uris: "{{ .Values.user_service_prefix }}/v4/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v4/user/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getUserProfileV5
  uris: "{{ .Values.user_service_prefix }}/v5/read"
  upstream_url: "{{ .Values.userorg_service_url }}/v5/user/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchUserV2
  uris: "{{ .Values.user_service_prefix }}/v2/search"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/user/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userTempAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchUserV3
  uris: "{{ .Values.user_service_prefix }}/v3/search"
  upstream_url: "{{ .Values.userorg_service_url }}/v3/user/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userTempAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchOrgV2
  uris: "{{ .Values.org_service_prefix }}/v2/search"
  upstream_url: "{{ .Values.userorg_service_url }}/v2/org/search"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: integrationAppRead
  uris: "{{ .Values.integration_app_prefix }}/v1/read"
  upstream_url: "{{ .Values.content_service_url }}/app/v4/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_request_size_limit }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: questionsetImportAPI
  uris: "{{ .Values.questionset_prefix }}/v1/import"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/import"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: getUsersPrograms
  uris: "{{ .Values.users_service_prefix }}/mlcore/v1/programs"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/users/programs"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - programAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getUsersSolutions
  uris: "{{ .Values.users_service_prefix }}/mlcore/v1/solutions"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/users/solutions"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - solutionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getTargetedSolutions
  uris: "{{ .Values.solutions_service_prefix }}/mlcore/v1/targetedSolutions"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/solutions/targetedSolutions"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - solutionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getSolutionReportInformation
  uris: "{{ .Values.resource_prefix }}/mlreports/v1/filtervalues"
  upstream_url: "{{ .Values.ml_reports_service_url }}/v1/resource/filtervalues"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - solutionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: userLocationScope
  uris: "{{ .Values.entities_service_prefix }}/mlcore/v1/subEntityListBasedOnRoleAndLocation"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/entities/subEntityListBasedOnRoleAndLocation"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - registryAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: mandatoryUserProfileFields
  uris: "{{ .Values.entities_service_prefix }}/mlcore/v1/entityTypesByLocationAndRole"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/users/entityTypesByLocationAndRole"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - registryAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: observationListEvidences
  uris: "{{ .Values.observations_service_prefix }}/mlreports/v1/listAllEvidences"
  upstream_url: "{{ .Values.ml_reports_service_url }}/v1/observations/listAllEvidences"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - observationAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: locationListing
  uris: "{{ .Values.entities_service_prefix }}/mlcore/v1/subEntityList"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/entities/subEntityList"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - locationAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getTargetedEntity
  uris: "{{ .Values.users_service_prefix }}/mlcore/v1/targetedEntity"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/users/targetedEntity"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - registryAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getProjectDetails
  uris: "{{ .Values.userProjects_service_prefix }}/mlprojects/v1/details"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/userProjects/details"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - projectAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getProjectEntities
  uris: "{{ .Values.reports_service_prefix }}/mlprojects/v1/entity"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/reports/entity"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - projectAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getProjectDetailReport
  uris: "{{ .Values.reports_service_prefix }}/mlprojects/v1/detailView"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/reports/detailView"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - projectAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getProjectPrograms
  uris: "{{ .Values.reports_service_prefix }}/mlprojects/v1/getProgramsByEntity"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/reports/getProgramsByEntity"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - projectAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateProject
  uris: "{{ .Values.userProjects_service_prefix }}/mlprojects/v1/sync"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/userProjects/sync"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - projectUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createProject
  uris: "{{ .Values.userProjects_service_prefix }}/mlprojects/v1/add"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/userProjects/add"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - projectCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getProjectSolutionDetails
  uris: "{{ .Values.userProjects_service_prefix }}/mlprojects/v1/solutionDetails"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/userProjects/solutionDetails"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - projectAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getProjectStatus
  uris: "{{ .Values.userProjects_service_prefix }}/mlprojects/v1/tasksStatus"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/userProjects/tasksStatus"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - projectAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: shareProject
  uris: "{{ .Values.userProjects_service_prefix }}/mlprojects/v1/share"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/userProjects/share"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - projectAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getProjectTemplatesDetails
  uris: "{{ .Values.project_service_prefix }}/mlprojects/v1/templates/details"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/project/templates/details"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - solutionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listObservationEntities
  uris: "{{ .Values.observations_service_prefix }}/mlsurvey/v1/entities"
  upstream_url: "{{ .Values.ml_survey_service_url }}/v1/observations/entities"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - observationAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: observationSubmissionsList
  uris: "{{ .Values.observationSubmissions_service_prefix }}/mlsurvey/v1/list"
  upstream_url: "{{ .Values.ml_survey_service_url }}/v1/observationSubmissions/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - observationAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: observationQuestionList
  uris: "{{ .Values.observations_service_prefix }}/mlsurvey/v1/assessment"
  upstream_url: "{{ .Values.ml_survey_service_url }}/v1/observations/assessment"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - observationAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateObservationSubmission
  uris: "{{ .Values.observationSubmissions_service_prefix }}/mlsurvey/v1/update"
  upstream_url: "{{ .Values.ml_survey_service_url }}/v1/observationSubmissions/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - observationUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createObservationSubmission
  uris: "{{ .Values.observationSubmissions_service_prefix }}/mlsurvey/v1/create"
  upstream_url: "{{ .Values.ml_survey_service_url }}/v1/observationSubmissions/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - observationCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchLocationEntities
  uris: "{{ .Values.observations_service_prefix }}/mlsurvey/v1/searchEntities"
  upstream_url: "{{ .Values.ml_survey_service_url }}/v1/observations/searchEntities"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - registryAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: addObservationEntity
  uris: "{{ .Values.observations_service_prefix }}/mlsurvey/v1/updateEntities"
  upstream_url: "{{ .Values.ml_survey_service_url }}/v1/observations/updateEntities"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - observationCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: observationSolutionList
  uris: "{{ .Values.observationSubmissions_service_prefix }}/mlsurvey/v1/solutionList"
  upstream_url: "{{ .Values.ml_survey_service_url }}/v1/observationSubmissions/solutionList"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - observationAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: surveyQuestionList
  uris: "{{ .Values.surveys_service_prefix }}/mlsurvey/v1/details"
  upstream_url: "{{ .Values.ml_survey_service_url }}/v1/surveys/details"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - surveyAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: solutionsVerifyLink
  uris: "{{ .Values.solutions_service_prefix }}/mlsurvey/v1/verifyLink"
  upstream_url: "{{ .Values.ml_survey_service_url }}/v1/solutions/verifyLink"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - solutionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateSurveySubmission
  uris: "{{ .Values.surveySubmissions_service_prefix }}/mlsurvey/v1/update"
  upstream_url: "{{ .Values.ml_survey_service_url }}/v1/surveySubmissions/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - surveyUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: observationReports
  uris: "{{ .Values.reports_service_prefix }}/mlreports/v1/fetch"
  upstream_url: "{{ .Values.ml_reports_service_url }}/v1/reports/fetch"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - observationAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: surveyListEvidences
  uris: "{{ .Values.surveys_service_prefix }}/mlreports/v1/listAllEvidences"
  upstream_url: "{{ .Values.ml_reports_service_url }}/v1/surveys/listAllEvidences"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - surveyAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: surveyReport
  uris: "{{ .Values.surveys_service_prefix }}/mlreports/v1/getAllResponsesOfQuestion"
  upstream_url: "{{ .Values.ml_reports_service_url }}/v1/surveys/getAllResponsesOfQuestion"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - surveyAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: observationSubmissionCount
  uris: "{{ .Values.observations_service_prefix }}/mlreports/v1/submissionsCount"
  upstream_url: "{{ .Values.ml_reports_service_url }}/v1/observations/submissionsCount"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - observationAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getFileUploadUrls
  uris: "{{ .Values.cloud_service_prefix }}/mlcore/v1/files/preSignedUrls"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/cloud-services/files/preSignedUrls"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - cloudUrlsCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listPlatformPrograms
  uris: "{{ .Values.user_extension_prefix }}/mlcore/v1/programsByPlatformRoles"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/user-extension/programsByPlatformRoles"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - programAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listPlatformSolutions
  uris: "{{ .Values.user_extension_prefix }}/mlcore/v1/solutions"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/user-extension/solutions"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - solutionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getUserSegmentsUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/userSegment/get"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/userSegment/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createUserSegmentsUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/userSegment/create"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/userSegment/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateUserSegmentsUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/userSegment/update"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/userSegment/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: deleteUserSegmentsUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/userSegment/delete"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/userSegment/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: userSegmentsQueryBuilderUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/userSegment/queryBuilder"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/userSegment/queryBuilder"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchUserSegmentsUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/userSegment/search"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/userSegment/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createAdapterUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/adapter/create"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/adapter/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getAllAdapterUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/adapter/all"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/adapter/all"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getAdapterUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/adapter/get"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/adapter/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: deleteAdapterUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/adapter/delete"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/adapter/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateAdapterUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/adapter/update"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/adapter/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getAllTransformerUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/transformer/all"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/transformer/all"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createTransformerUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/transformer/create"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/transformer/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getTransformerUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/transformer/get"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/transformer/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateTransformerUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/transformer/update"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/transformer/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getFormsTransformerUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/transformer/getForms"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/transformer/getForms"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: uploadFormsTransformerUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/forms/upload"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/forms/upload"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.large_request_size_limit }}"

- name: createConversationLogicUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/conversationLogic/create"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/conversationLogic/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getAllConversationLogicUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/conversationLogic/all"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/conversationLogic/all"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getConversationLogicUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/conversationLogic/get"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/conversationLogic/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: deleteConversationLogicUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/conversationLogic/delete"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/conversationLogic/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateConversationLogicUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/conversationLogic/update"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/conversationLogic/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createBotUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/bot/create"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/bot/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getAllBotUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/bot/all"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/bot/all"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getBotUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/bot/get"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/bot/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: startBotUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/bot/start"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/bot/start"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: pauseBotUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/bot/pause"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/bot/pause"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchBotUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/bot/search"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/bot/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: deleteBotUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/bot/delete"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/bot/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateBotUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/bot/update"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/bot/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getAllUserForBotUCI
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/bot/getAllUsers"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/bot/getAllUsers"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: searchBotByStartingMessage
  uris: "{{ .Values.uci_admin_prefix }}/admin/v1/bot/getByParam"
  upstream_url: "{{ .Values.uci_admin_service_url }}/admin/v1/bot/getByParam"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: gqlUCI
  uris: "{{ .Values.uci_admin_prefix }}/uci-api/gql"
  upstream_url: "{{ .Values.uci_admin_service_url }}/v1/graphql"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: sendNotification
  uris: "{{ .Values.notification_service_prefix }}/v2/send"
  upstream_url: "{{ .Values.notification_service_url }}/v2/notification/send"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - sendNotification
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readNotificationFeed
  uris: "{{ .Values.notification_service_prefix }}/v1/feed/read"
  upstream_url: "{{ .Values.notification_service_url }}/v1/notification/feed/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - readNotificationFeed
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateNotificationFeed
  uris: "{{ .Values.notification_service_prefix }}/v1/feed/update"
  upstream_url: "{{ .Values.notification_service_url }}/v1/notification/feed/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - updateNotificationFeed
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: deleteNotificationFeed
  uris: "{{ .Values.notification_service_prefix }}/v1/feed/delete"
  upstream_url: "{{ .Values.notification_service_url }}/v1/notification/feed/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - deleteNotificationFeed
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: netcoreWhatsappInbound
  uris: "{{ .Values.uci_admin_prefix }}/inbound/netcore/whatsApp"
  upstream_url: "{{ .Values.uci_inbound_service_url }}/netcore/whatsApp"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - externalmessagingAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: VerifyLink
  uris: "{{ .Values.solutions_service_prefix }}/mlcore/v1/verifyLink"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/solutions/verifyLink"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - solutionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: GetTemplateOrQuestions
  uris: "{{ .Values.solutions_service_prefix }}/mlcore/v1/details"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/solutions/details"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - solutionAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: CreateProjectFromTemplate
  uris: "{{ .Values.userProjects_service_prefix }}/mlprojects/v1/importFromLibrary"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/userProjects/importFromLibrary"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - projectUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateUserV3
  uris: "{{ .Values.user_service_prefix }}/v3/update"
  upstream_url: "{{ .Values.userorg_service_url }}/v3/user/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: createContentV2
  uris: "{{ .Values.content_prefix }}/v2/create"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: updateContentV2
  uris: "{{ .Values.content_prefix }}/v2/update"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readContentV2
  uris: "{{ .Values.content_prefix }}/v2/read"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/read"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: uploadUrlContentV2
  uris: "{{ .Values.content_prefix }}/v2/upload/url"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/upload/url"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: uploadContentV2
  uris: "{{ .Values.content_prefix }}/v2/upload"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/upload"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: copyContentV2
  uris: "{{ .Values.content_prefix }}/v2/copy"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/copy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: importContentV2
  uris: "{{ .Values.content_prefix }}/v2/import"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/import"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: flagContentV2
  uris: "{{ .Values.content_prefix }}/v2/flag"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/flag"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: acceptFlagContentV2
  uris: "{{ .Values.content_prefix }}/v2/flag/accept"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/flag/accept"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: discardContentV2
  uris: "{{ .Values.content_prefix }}/v2/discard"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/discard"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: retireContentV2
  uris: "{{ .Values.content_prefix }}/v2/retire"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/retire"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: reviewContentV2
  uris: "{{ .Values.content_prefix }}/v2/review"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/review"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: rejectContentV2
  uris: "{{ .Values.content_prefix }}/v2/reject"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/reject"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: linkDialcodeContentV2
  uris: "{{ .Values.content_prefix }}/v2/dialcode/link"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/dialcode/link"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: reserveDialcodeContentV2
  uris: "{{ .Values.content_prefix }}/v2/dialcode/reserve"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/dialcode/reserve"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: collectionReview
  uris: "{{ .Values.collection_prefix }}/v1/review"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/review"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: collectionReject
  uris: "{{ .Values.collection_prefix }}/v1/reject"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/reject"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: acceptCollectionFlag
  uris: "{{ .Values.collection_prefix }}/v1/flag/accept"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/flag/accept"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: reserveDialcodeCollection
  uris: "{{ .Values.collection_prefix }}/v1/dialcode/reserve"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/dialcode/reserve"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: listNotificationTemplate
  uris: "{{ .Values.notification_service_prefix }}/v1/template/list"
  upstream_url: "{{ .Values.notification_service_url }}/v1/notification/template/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - getNotificationTemplate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createNotificationTemplate
  uris: "{{ .Values.notification_service_prefix }}/v1/template/create"
  upstream_url: "{{ .Values.notification_service_url }}/v1/notification/template/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - createNotificationTemplate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: deleteNotificationTemplate
  uris: "{{ .Values.notification_service_prefix }}/v1/template/delete"
  upstream_url: "{{ .Values.notification_service_url }}/v1/notification/template/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - deleteNotificationTemplate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateNotificationTemplate
  uris: "{{ .Values.notification_service_prefix }}/v1/template/update"
  upstream_url: "{{ .Values.notification_service_url }}/v1/notification/template/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - updateNotificationTemplate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: updateActionNotificationTemplate
  uris: "{{ .Values.notification_service_prefix }}/v1/template/action/update"
  upstream_url: "{{ .Values.notification_service_url }}/v1/notification/template/action/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - updateNotificationTemplate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: getActionNotificationTemplate
  uris: "{{ .Values.notification_service_prefix }}/v1/template"
  upstream_url: "{{ .Values.notification_service_url }}/v1/notification/template"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - getNotificationTemplate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createRCCertificate
  uris: "{{ .Values.registry_service_prefix }}/certificate/v1/create"
  upstream_url: "{{ .Values.registry_service_url }}/api/v1/TrainingCertificate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"
  - name: request-transformer
    config.remove.headers: Authorization

- name: searchRCCertificate
  uris: "{{ .Values.registry_service_prefix }}/certificate/v1/search"
  upstream_url: "{{ .Values.registry_service_url }}/api/v1/TrainingCertificate/search"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"
  - name: request-transformer
    config.remove.headers: Authorization

- name: getRCCertificate
  uris: "{{ .Values.registry_service_prefix }}/certificate/v1/download"
  upstream_url: "{{ .Values.registry_service_url }}/api/v1/TrainingCertificate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousCertificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"
  - name: request-transformer
    config.remove.headers: Authorization

- name: getRCPublicKey
  uris: "{{ .Values.registry_service_prefix }}/certificate/v1/key"
  upstream_url: "{{ .Values.registry_service_url }}/api/v1/PublicKey"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousCertificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"
  - name: request-transformer
    config.remove.headers: Authorization

- name: getReportDatasets
  uris: "{{ .Values.report_service_prefix }}/report/datasets/get"
  upstream_url: "{{ .Values.report_service_url }}/report/datasets/get"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - reportsAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: projectCertificateList
  uris: "{{ .Values.userProjects_service_prefix }}/mlprojects/v1/certificates"
  upstream_url: "{{ .Values.ml_project_service_url }}/v1/userProjects/certificates"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - projectAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: createRCProjectCertificate
  uris: "{{ .Values.registry_service_prefix }}/certificate/v1/create"
  upstream_url: "{{ .Values.registry_service_url }}/api/v1/ProjectCertificate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - certificateCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"
  - name: request-transformer
    config.remove.headers: Authorization

- name: getProjectRCCertificate
  uris: "{{ .Values.registry_service_prefix }}/projectCertificate/v1/download"
  upstream_url: "{{ .Values.registry_service_url }}/api/v1/ProjectCertificate"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousCertificateAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"
  - name: request-transformer
    config.remove.headers: Authorization

- name: fetchAllForm
  uris: "{{ .Values.data_service_prefix }}/v1/form/fetchAll"
  upstream_url: "{{ .Values.player_service_url }}/plugin/v1/form/fetchAll"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - formUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: releaseDialcodeContentV2
  uris: "{{ .Values.content_prefix }}/v2/dialcode/release"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/dialcode/release"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: releaseDialcodeCollection
  uris: "{{ .Values.collection_prefix }}/v1/dialcode/release"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/dialcode/release"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: publishContentV2
  uris: "{{ .Values.content_prefix }}/v2/publish"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: unlistedPublishContent
  uris: "{{ .Values.content_prefix }}/v1/unlisted/publish"
  upstream_url: "{{ .Values.content_service_url }}/content/v3/unlisted/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: unlistedPublishContentV2
  uris: "{{ .Values.content_prefix }}/v2/unlisted/publish"
  upstream_url: "{{ .Values.content_service_url }}/content/v4/unlisted/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: publishCollection
  uris: "{{ .Values.collection_prefix }}/v1/publish"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: unlistedPublishCollection
  uris: "{{ .Values.collection_prefix }}/v1/unlisted/publish"
  upstream_url: "{{ .Values.content_service_url }}/collection/v4/unlisted/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: readDIALCodesBatchInfo
  uris: "{{ .Values.dialcode_service_prefix }}/v2/read/batch"
  upstream_url: "{{ .Values.dial_service_url }}/dialcode/v4/batch/read"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: joinProgramByUser
  uris: "{{ .Values.programs_service_prefix }}/mlcore/v1/join"
  upstream_url: "{{ .Values.ml_core_service_url }}/v1/programs/join"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - programAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: questionsetCopy
  uris: "{{ .Values.questionset_prefix }}/v1/copy"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/copy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - 'contentCreate'
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionCopy
  uris: "{{ .Values.question_prefix }}/v1/copy"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v4/copy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - 'contentCreate'
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: exhaustSubmitProxyAPI
  uris: "{{ .Values.course_service_prefix }}/v1/jobrequest/submit"
  upstream_url: "{{ .Values.lms_service_url }}/v1/jobrequest/submit"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: exhaustListProxyAPI
  uris: "{{ .Values.course_service_prefix }}/v1/jobrequest/list"
  upstream_url: "{{ .Values.lms_service_url }}/v1/jobrequest/list"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - courseAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: orgAddEncryptionKey
  uris: "{{ .Values.org_service_prefix }}/v1/update/encryptionkey"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/org/update/encryptionkey"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - orgSuperAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

# New API for connecting to learning service in order to automate post install scripts
- name: domainDefinitions
  uris: "{{ .Values.learning_service_prefix }}/taxonomy/domain/definition"
  upstream_url: "{{ .Values.learning_service_url }}/taxonomy/domain/definition"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - definitionsAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

- name: masterCategories
  uris: "{{ .Values.learning_service_prefix }}/framework/v3/category/master/create"
  upstream_url: "{{ .Values.learning_service_url }}/framework/v3/category/master/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - masterCategoriesAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.small_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.small_request_size_limit }}"

#release-7.0.0

- name: deleteUser
  uris: "{{ .Values.user_service_prefix }}/v1/delete"
  upstream_url: "{{ .Values.userorg_service_url }}/v1/user/delete"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - userUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionCreateV2
  uris: "{{ .Values.question_prefix }}/v2/create"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v5/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionReadV2
  uris: "{{ .Values.question_prefix }}/v2/read"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v5/read"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionPrivateReadV2
  uris: "{{ .Values.question_prefix }}/v2/private/read"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v5/private/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionUpdateV2
  uris: "{{ .Values.question_prefix }}/v2/update"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v5/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionRetireV2
  uris: "{{ .Values.question_prefix }}/v2/retire"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v5/retire"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionReviewV2
  uris: "{{ .Values.question_prefix }}/v2/review"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v5/review"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionPublishV2
  uris: "{{ .Values.question_prefix }}/v2/publish"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v5/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionListV2
  uris: "{{ .Values.question_prefix }}/v2/list"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v5/list"
  strip_uri: true
  plugins:
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionRejectV2
  uris: "{{ .Values.question_prefix }}/v2/reject"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v5/reject"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: copyQuestionV2
  uris: "{{ .Values.question_prefix }}/v2/copy"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v5/copy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetCreateV2
  uris: "{{ .Values.questionset_prefix }}/v2/create"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetReadV2
  uris: "{{ .Values.questionset_prefix }}/v2/read"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/read"
  strip_uri: true
  plugins:
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: ip
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetPrivateReadV2
  uris: "{{ .Values.questionset_prefix }}/v2/private/read"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/private/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetUpdateV2
  uris: "{{ .Values.questionset_prefix }}/v2/update"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetAddQuestionV2
  uris: "{{ .Values.questionset_prefix }}/v2/add"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/add"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - 'contentUpdate'
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetRemoveQuestionV2
  uris: "{{ .Values.questionset_prefix }}/v2/remove"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/remove"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - 'contentUpdate'
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetRetireV2
  uris: "{{ .Values.questionset_prefix }}/v2/retire"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/retire"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetReviewV2
  uris: "{{ .Values.questionset_prefix }}/v2/review"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/review"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetPublishV2
  uris: "{{ .Values.questionset_prefix }}/v2/publish"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/publish"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetUpdateHierarchyV2
  uris: "{{ .Values.questionset_prefix }}/v2/hierarchy/update"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/hierarchy/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentUpdate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetReadHierarchyV2
  uris: "{{ .Values.questionset_prefix }}/v2/hierarchy"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/hierarchy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - anonymousContentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetRejectV2
  uris: "{{ .Values.questionset_prefix }}/v2/reject"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/reject"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionImportAPIV2
  uris: "{{ .Values.question_prefix }}/v2/import"
  upstream_url: "{{ .Values.assessment_service_url }}/question/v5/import"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionsetImportAPIV2
  uris: "{{ .Values.questionset_prefix }}/v2/import"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/import"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: copyQuestionSetV2
  uris: "{{ .Values.questionset_prefix }}/v2/copy"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/copy"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentCreate
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetUpdateComment
  uris: "{{ .Values.questionset_prefix }}/v1/comment/update"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/comment/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetUpdateCommentV2
  uris: "{{ .Values.questionset_prefix }}/v2/comment/update"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/comment/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAdmin
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetReadComment
  uris: "{{ .Values.questionset_prefix }}/v1/comment/read"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v4/comment/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: questionSetReadCommentV2
  uris: "{{ .Values.questionset_prefix }}/v2/comment/read"
  upstream_url: "{{ .Values.assessment_service_url }}/questionset/v5/comment/read"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - contentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"

- name: assessmentItemCreate
  uris: "{{ .Values.assessment_prefix }}/v1/items/create"
  upstream_url: "{{ .Values.learning_service_url }}/assessment/v3/items/create"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - assessmentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"  

- name: assessmentItemUpdate
  uris: "{{ .Values.assessment_prefix }}/v1/items/update"
  upstream_url: "{{ .Values.learning_service_url }}/assessment/v3/items/update"
  strip_uri: true
  plugins:
  - name: jwt
  - name: cors
  - {{ .Values.statsd_pulgin | toYaml | nindent 4 | trim }}
  - name: acl
    config.whitelist:
    - assessmentAccess
  - name: rate-limiting
    config.policy: local
    config.hour: "{{ .Values.medium_rate_limit_per_hour }}"
    config.limit_by: credential
  - name: request-size-limiting
    config.allowed_payload_size: "{{ .Values.medium_request_size_limit }}"     